{% extends "ApachecmsFrontendBundle::layout_lp.html.twig" %}
{% block stylesheet %} 
{{ parent() }}
{% endblock %}
{% block body %}
{{ include('ApachecmsFrontendBundle::_partials/brand.html.twig') }}
{% block headerPage %}
{% include 'ApachecmsFrontendBundle:_partials:breadcrumbs.html.twig' with { 'title_entity': entity.title } %}
{% endblock %}
<div class="container">
    <div class="row">
        <div class="col-md-3">
            {{ include('ApachecmsFrontendBundle::Stats/_partials/menu.html.twig') }}
        </div>
        <div class="col-md-9">
            <div class="card">
                <h2 class="card-header">
                    {{ (app.request.attributes.get('_route_params')['_breadcrumbs']|last)['label'] | trans }}
                </h2>
                <div class="card-body">
                    <div class="table-responsive">
                        <table id="queries_dataTable" class="display nowrap table table-striped table-bordered" cellspacing="0" width="100%"></table>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}
{% block javascripts %} 
{{ parent() }}
<script src="{{ asset('bundles/apachecmsbackend/assets/plugins/datatables/jquery.dataTables.min.js') }}"></script>
<script src="https://cdn.datatables.net/buttons/1.2.2/js/dataTables.buttons.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/2.5.0/jszip.min.js"></script>
<script src="https://cdn.datatables.net/buttons/1.2.2/js/buttons.html5.min.js"></script>
<script>
    $.extend( true, $.fn.dataTable.defaults, {
        dom: 'Bfrtip',
        ajax: "{{ path('apachecms_api_queries_getContacts',{ 'landing': app.request.get('id') })}}",
        pageLength: 15,
        lengthMenu: [15, 25, 50],
        language: {
            url: '//cdn.datatables.net/plug-ins/1.10.19/i18n/Spanish.json'
        },
        buttons: [
           { "extend": 'excel', "text":'{{ 'download.excel' | trans }}',"className": 'btn btn-info btn-sm' }
        ],
    });
    $(function () {
        $('#queries_dataTable').DataTable({
            order: [[ 0, 'desc' ]],
            columns: [
                { title:"{{ 'Origen' | trans }}",data: "type" },
                { title:"{{ 'Nombre' | trans }}",data: "name" },
                { title:"{{ 'Email' | trans }}",data: "email" },
                { title:"{{ 'Tel√©fono' | trans }}",data: "phone" },
                {# {
                    data: null,
                    orderable: false,
                    className: "text-right",
                    render: function (data, type, JsonResultRow, meta) {
                        return `
                            <button type="button" class="btn-view btn btn-sm btn-outline-primary btn-circle"><i class="fa fa-eye"></i></button>
                            `;
                    }
                } #}
            ]
        });
    });
</script>
{% endblock %}